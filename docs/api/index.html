<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.3.2">
<meta name="crystal_docs.project_version" content="master-dev">
<meta name="crystal_docs.project_name" content="crytic">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="crytic">
  <title>crytic master-dev</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          crytic
        </a>
      </h1>

      <span class="project-version">
        master-dev
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="crytic/Crytic" data-name="crytic">
      <a href="Crytic.html">Crytic</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Cli" data-name="crytic::cli">
      <a href="Crytic/Cli.html">Cli</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/CliOptions" data-name="crytic::clioptions">
      <a href="Crytic/CliOptions.html">CliOptions</a>
      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Command" data-name="crytic::command">
      <a href="Crytic/Command.html">Command</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Command/Noop" data-name="crytic::command::noop">
      <a href="Crytic/Command/Noop.html">Noop</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Command/Test" data-name="crytic::command::test">
      <a href="Crytic/Command/Test.html">Test</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Diff" data-name="crytic::diff(a, b)">
      <a href="Crytic/Diff.html">Diff</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Diff/Chunk" data-name="crytic::diff::chunk(t)">
      <a href="Crytic/Diff/Chunk.html">Chunk</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Diff/Type" data-name="crytic::diff::type">
      <a href="Crytic/Diff/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Generator" data-name="crytic::generator">
      <a href="Crytic/Generator.html">Generator</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Generator/Generator" data-name="crytic::generator::generator">
      <a href="Crytic/Generator/Generator.html">Generator</a>
      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Generator/InMemoryMutationsGenerator" data-name="crytic::generator::inmemorymutationsgenerator">
      <a href="Crytic/Generator/InMemoryMutationsGenerator.html">InMemoryMutationsGenerator</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Generator/InMemoryMutationsGenerator/MutationFactory" data-name="crytic::generator::inmemorymutationsgenerator::mutationfactory">
      <a href="Crytic/Generator/InMemoryMutationsGenerator/MutationFactory.html">MutationFactory</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Generator/MutationSet" data-name="crytic::generator::mutationset">
      <a href="Crytic/Generator/MutationSet.html">MutationSet</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="crytic/Crytic/MsiCalculator" data-name="crytic::msicalculator">
      <a href="Crytic/MsiCalculator.html">MsiCalculator</a>
      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Mutant" data-name="crytic::mutant">
      <a href="Crytic/Mutant.html">Mutant</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Mutant/AndOrSwap" data-name="crytic::mutant::andorswap">
      <a href="Crytic/Mutant/AndOrSwap.html">AndOrSwap</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/AndOrSwapPossibilities" data-name="crytic::mutant::andorswappossibilities">
      <a href="Crytic/Mutant/AndOrSwapPossibilities.html">AndOrSwapPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/AnyAllSwap" data-name="crytic::mutant::anyallswap">
      <a href="Crytic/Mutant/AnyAllSwap.html">AnyAllSwap</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/AnyAllSwapPossibilities" data-name="crytic::mutant::anyallswappossibilities">
      <a href="Crytic/Mutant/AnyAllSwapPossibilities.html">AnyAllSwapPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/BoolLiteralFlip" data-name="crytic::mutant::boolliteralflip">
      <a href="Crytic/Mutant/BoolLiteralFlip.html">BoolLiteralFlip</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/BoolLiteralFlipPossibilities" data-name="crytic::mutant::boolliteralflippossibilities">
      <a href="Crytic/Mutant/BoolLiteralFlipPossibilities.html">BoolLiteralFlipPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/ConditionFlip" data-name="crytic::mutant::conditionflip">
      <a href="Crytic/Mutant/ConditionFlip.html">ConditionFlip</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/ConditionFlipPossibilities" data-name="crytic::mutant::conditionflippossibilities">
      <a href="Crytic/Mutant/ConditionFlipPossibilities.html">ConditionFlipPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/DropCallInVoidDef" data-name="crytic::mutant::dropcallinvoiddef">
      <a href="Crytic/Mutant/DropCallInVoidDef.html">DropCallInVoidDef</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/DropCallInVoidDefPossibilities" data-name="crytic::mutant::dropcallinvoiddefpossibilities">
      <a href="Crytic/Mutant/DropCallInVoidDefPossibilities.html">DropCallInVoidDefPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/FullLocation" data-name="crytic::mutant::fulllocation">
      <a href="Crytic/Mutant/FullLocation.html">FullLocation</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/Mutant" data-name="crytic::mutant::mutant">
      <a href="Crytic/Mutant/Mutant.html">Mutant</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/Noop" data-name="crytic::mutant::noop">
      <a href="Crytic/Mutant/Noop.html">Noop</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/NumberLiteralChange" data-name="crytic::mutant::numberliteralchange">
      <a href="Crytic/Mutant/NumberLiteralChange.html">NumberLiteralChange</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/NumberLiteralChangePossibilities" data-name="crytic::mutant::numberliteralchangepossibilities">
      <a href="Crytic/Mutant/NumberLiteralChangePossibilities.html">NumberLiteralChangePossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/NumberLiteralSignFlip" data-name="crytic::mutant::numberliteralsignflip">
      <a href="Crytic/Mutant/NumberLiteralSignFlip.html">NumberLiteralSignFlip</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/NumberLiteralSignFlipPossibilities" data-name="crytic::mutant::numberliteralsignflippossibilities">
      <a href="Crytic/Mutant/NumberLiteralSignFlipPossibilities.html">NumberLiteralSignFlipPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/Possibilities" data-name="crytic::mutant::possibilities">
      <a href="Crytic/Mutant/Possibilities.html">Possibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/RegexLiteralChange" data-name="crytic::mutant::regexliteralchange">
      <a href="Crytic/Mutant/RegexLiteralChange.html">RegexLiteralChange</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/RegexLiteralChangePossibilities" data-name="crytic::mutant::regexliteralchangepossibilities">
      <a href="Crytic/Mutant/RegexLiteralChangePossibilities.html">RegexLiteralChangePossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/SelectRejectSwap" data-name="crytic::mutant::selectrejectswap">
      <a href="Crytic/Mutant/SelectRejectSwap.html">SelectRejectSwap</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/SelectRejectSwapPossibilities" data-name="crytic::mutant::selectrejectswappossibilities">
      <a href="Crytic/Mutant/SelectRejectSwapPossibilities.html">SelectRejectSwapPossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/StringLiteralChange" data-name="crytic::mutant::stringliteralchange">
      <a href="Crytic/Mutant/StringLiteralChange.html">StringLiteralChange</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/StringLiteralChangePossibilities" data-name="crytic::mutant::stringliteralchangepossibilities">
      <a href="Crytic/Mutant/StringLiteralChangePossibilities.html">StringLiteralChangePossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/SymbolLiteralChange" data-name="crytic::mutant::symbolliteralchange">
      <a href="Crytic/Mutant/SymbolLiteralChange.html">SymbolLiteralChange</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/SymbolLiteralChangePossibilities" data-name="crytic::mutant::symbolliteralchangepossibilities">
      <a href="Crytic/Mutant/SymbolLiteralChangePossibilities.html">SymbolLiteralChangePossibilities</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/TransformerMutant" data-name="crytic::mutant::transformermutant">
      <a href="Crytic/Mutant/TransformerMutant.html">TransformerMutant</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutant/VisitorMutant" data-name="crytic::mutant::visitormutant">
      <a href="Crytic/Mutant/VisitorMutant.html">VisitorMutant</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="crytic/Crytic/MutatedSubject" data-name="crytic::mutatedsubject">
      <a href="Crytic/MutatedSubject.html">MutatedSubject</a>
      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Mutation" data-name="crytic::mutation">
      <a href="Crytic/Mutation.html">Mutation</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Mutation/Config" data-name="crytic::mutation::config">
      <a href="Crytic/Mutation/Config.html">Config</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/Environment" data-name="crytic::mutation::environment">
      <a href="Crytic/Mutation/Environment.html">Environment</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/InjectMutatedSubjectIntoSpecs" data-name="crytic::mutation::injectmutatedsubjectintospecs">
      <a href="Crytic/Mutation/InjectMutatedSubjectIntoSpecs.html">InjectMutatedSubjectIntoSpecs</a>
      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Mutation/IsolatedMutation" data-name="crytic::mutation::isolatedmutation">
      <a href="Crytic/Mutation/IsolatedMutation.html">IsolatedMutation</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Mutation/IsolatedMutation/Preamble" data-name="crytic::mutation::isolatedmutation::preamble">
      <a href="Crytic/Mutation/IsolatedMutation/Preamble.html">Preamble</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/Mutation" data-name="crytic::mutation::mutation">
      <a href="Crytic/Mutation/Mutation.html">Mutation</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/NoMutation" data-name="crytic::mutation::nomutation">
      <a href="Crytic/Mutation/NoMutation.html">NoMutation</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/OriginalResult" data-name="crytic::mutation::originalresult">
      <a href="Crytic/Mutation/OriginalResult.html">OriginalResult</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/RequireResolver" data-name="crytic::mutation::requireresolver">
      <a href="Crytic/Mutation/RequireResolver.html">RequireResolver</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/Result" data-name="crytic::mutation::result">
      <a href="Crytic/Mutation/Result.html">Result</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/ResultSet" data-name="crytic::mutation::resultset">
      <a href="Crytic/Mutation/ResultSet.html">ResultSet</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/Status" data-name="crytic::mutation::status">
      <a href="Crytic/Mutation/Status.html">Status</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Mutation/Tracker" data-name="crytic::mutation::tracker">
      <a href="Crytic/Mutation/Tracker.html">Tracker</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="crytic/Crytic/MutationScoreIndicator" data-name="crytic::mutationscoreindicator">
      <a href="Crytic/MutationScoreIndicator.html">MutationScoreIndicator</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/ProcessProcessRunner" data-name="crytic::processprocessrunner">
      <a href="Crytic/ProcessProcessRunner.html">ProcessProcessRunner</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/ProcessRunner" data-name="crytic::processrunner">
      <a href="Crytic/ProcessRunner.html">ProcessRunner</a>
      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Reporter" data-name="crytic::reporter">
      <a href="Crytic/Reporter.html">Reporter</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Reporter/DefaultHttpClient" data-name="crytic::reporter::defaulthttpclient">
      <a href="Crytic/Reporter/DefaultHttpClient.html">DefaultHttpClient</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/FileSummaryIoReporter" data-name="crytic::reporter::filesummaryioreporter">
      <a href="Crytic/Reporter/FileSummaryIoReporter.html">FileSummaryIoReporter</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/HttpClient" data-name="crytic::reporter::httpclient">
      <a href="Crytic/Reporter/HttpClient.html">HttpClient</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/IoReporter" data-name="crytic::reporter::ioreporter">
      <a href="Crytic/Reporter/IoReporter.html">IoReporter</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/Reporter" data-name="crytic::reporter::reporter">
      <a href="Crytic/Reporter/Reporter.html">Reporter</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/Reporters" data-name="crytic::reporter::reporters">
      <a href="Crytic/Reporter/Reporters.html">Reporters</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/StrykerBadgeReporter" data-name="crytic::reporter::strykerbadgereporter">
      <a href="Crytic/Reporter/StrykerBadgeReporter.html">StrykerBadgeReporter</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Reporter/Timer" data-name="crytic::reporter::timer">
      <a href="Crytic/Reporter/Timer.html">Timer</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="crytic/Crytic/Runner" data-name="crytic::runner">
      <a href="Crytic/Runner.html">Runner</a>
      
        <ul>
  
  <li class=" " data-id="crytic/Crytic/Runner/NoMutationFactory" data-name="crytic::runner::nomutationfactory">
      <a href="Crytic/Runner/NoMutationFactory.html">NoMutationFactory</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Runner/Run" data-name="crytic::runner::run">
      <a href="Crytic/Runner/Run.html">Run</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Runner/Sequential" data-name="crytic::runner::sequential">
      <a href="Crytic/Runner/Sequential.html">Sequential</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="crytic/Crytic/SideEffects" data-name="crytic::sideeffects">
      <a href="Crytic/SideEffects.html">SideEffects</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/SourceCode" data-name="crytic::sourcecode">
      <a href="Crytic/SourceCode.html">SourceCode</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Subject" data-name="crytic::subject">
      <a href="Crytic/Subject.html">Subject</a>
      
    </li>
  
  <li class=" " data-id="crytic/Crytic/Timeout" data-name="crytic::timeout">
      <a href="Crytic/Timeout.html">Timeout</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 align="center">Crytic</h1>
<p align="center">
    <img alt="Crytic logo" height="250" src="searching-1.png" align="center" />
</p>
<p align="center">
    <a href="#installation">Installation</a> &bull;
    <a href="#usage">Usage</a> &bull;
    <a href="CHANGELOG.md">Changelog</a> &bull;
    <a href="#credits--inspiration">Credits</a>
</p>
<p>Crytic, pronounced /ˈkrɪtɪk/, is a mutation testing framework for the crystal programming language. Mutation testing is a type of software testing where specific statements in the code are changed to determine if test cases find this defect.</p>
<blockquote>
<p>Crytic is in a very early state of development. It is not very clever, making it slow as well.</p>
</blockquote>
<p><a href="https://github.com/hanneskaeufler/crytic/releases"><img src="https://img.shields.io/github/tag-date/hanneskaeufler/crytic.svg" alt="Latest Tag" /></a> <a href="https://circleci.com/gh/hanneskaeufler/crytic/tree/master"><img src="https://circleci.com/gh/hanneskaeufler/crytic/tree/master.svg?style=svg" alt="CircleCI" /></a> <a href="https://codecov.io/gh/hanneskaeufler/crytic"><img src="https://codecov.io/gh/hanneskaeufler/crytic/branch/master/graph/badge.svg" alt="codecov" /></a> <img src="https://badge.stryker-mutator.io/github.com/hanneskaeufler/crytic/master" alt="Mutation Score" /></p>
<h3><a id="blog-posts" class="anchor" href="#blog-posts">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Blog posts</h3>
<ul>
<li><a href="https://hannes.kaeufler.net/posts/introducing-crytic---mutation-testing-in-crystal-lang">Introducing crytic - mutation testing in crystal-lang</a></li>
<li><a href="http://hannes.kaeufler.net/posts/building-a-mutation-test-framework-in-crystal---part-1">Building a mutation test framework in crystal - Part 1</a></li>
</ul>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>
<p>Add this to your application's <code>shard.yml</code>:</p>
<pre><code class="language-yaml">development_dependencies:
  crytic:
    github: hanneskaeufler/crytic
    version: ~&gt; 8</code></pre>
<p>After <code>shards install</code>, this will place the <code>crytic</code> executable into the <code>bin/</code> folder inside your project.</p>
<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>
<p>Crytic understands two commands: <code>test</code> and <code>noop</code>.</p>
<p>Running <code>crytic test</code> without further arguments will mutate all of the source files found by <code>src/**/*.cr</code> and use the test-suite containing <code>spec/**/*_spec.cr</code>. Depending on the size of your project and the duration of a full <code>crystal spec</code>, this might take quite a bit of time.</p>
<pre><code class="language-shell">./bin/crytic test</code></pre>
<p>Crytic can also be run to only mutate statements in one file, let's call that our subject, or <code>--subject</code> in the command line interface. You can also provide a list of test files to be executed in order to find the defects. This might be helpful to exclude certain long-running integration specs in order to speed up the test suite.</p>
<pre><code class="language-shell">./bin/crytic test --subject src/blog/pages/archive.cr spec/blog_spec.cr spec/blog/pages/archive_spec.cr</code></pre>
<p>The above command determines a list of mutations that can be performed on the source code of <code>archive.cr</code> and joins the <code>blog_spec.cr</code> and <code>archive_spec.cr</code> as a test-suite to find suriving mutants.</p>
<p>Running <code>./bin/crytic noop</code> will output the source code as if crytic applied a no-operation mutation. This can help with debugging crytic bugs by
executing e.g. <code>./bin/crytic noop | crystal eval</code>.</p>
<h3><a id="cli-options" class="anchor" href="#cli-options">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>CLI options</h3>
<h4><a id="for-test-command" class="anchor" href="#for-test-command">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>For &quot;test&quot; command</h4>
<p><code>--subject</code>/<code>-s</code> specifies a relative filepath to the sourcecode being mutated.</p>
<p><code>--min-msi</code>/<code>-m</code> specifies a threshold as to when to exit the program with 0 even when mutants survived. MSI is the Mutation Score Indicator.</p>
<p><code>--preamble</code>/<code>-p</code> specifies some source code to prepended to the combination of mutated source and specs. By default this will inject a bit of code to enable the &quot;fail fast&quot; mode of crystal <a href="https://crystal-lang.org/api/0.27.0/Spec.html">spec</a>. This can be used to disable the fail fast behaviour or avoid errors if you don't use crystal spec.</p>
<p><code>--reporters/-r</code> specifies which reporters to enable via a comma separated list. Reporters <code>Console</code>, <code>Stryker</code> and <code>ConsoleFileSummary</code> exist. <code>Console</code> is enabled by default if the option is omitted.</p>
<p>The rest of the unnamed positional arguments are relative filepaths to the specs to be run.</p>
<h4><a id="for-noop-command" class="anchor" href="#for-noop-command">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>For &quot;noop&quot; command</h4>
<p>All unnamed positional arguments are relative filepaths to the specs source code to be printed.</p>
<h3><a id="how-to-read-the-output" class="anchor" href="#how-to-read-the-output">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>How to read the output</h3>
<pre><code class="language-shell">
✅ Original test suite passed.
Running 138 mutations.

    ❌ AndOrSwap
        in source.cr:26:7
        The following change didn't fail the test-suite:
            @@ -26,7 +26,7 @@
                     end
                   end
                   def ==(other : Chunk)
            -        ((type == other.type) &amp;&amp; (range_a == other.range_a)) &amp;&amp; (range_b == other.range_b)
            +        ((type == other.type) &amp;&amp; (range_a == other.range_a)) || (range_b == other.range_b)
                   end
                 end
                 enum Type

    ✅ AndOrSwap
        in source.cr:109:13

Finished in 14:02 minutes:
138 mutations, 85 covered, 36 uncovered, 0 errored, 17 timeout. Mutation Score Indicator (MSI): 73.91%</code></pre>
<p>The first good message here is that the <code>Original test suite passed</code>. Crytic ran <code>crystal spec [with all spec files]</code> and that exited with exit code <code>0</code>. Any other result on your inital test suite and it would not have made sense to continue. Intentionally breaking source code which is already broken is of no use.</p>
<p>Each occurance of <code>✅</code> shows that a mutant has been killed, ergo that the change in the source code was detected by the test suite. The line and column numbers are printed to follow the progress through the subject file.</p>
<p><code>❌ AndOrSwap</code> is signaling that indeed a mutant, an intentional change in the subject, was not detected. The diff below shows the change that was made which was not caught by the test suite.</p>
<h3><a id="mutation-badge" class="anchor" href="#mutation-badge">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Mutation Badge</h3>
<p>To show a badge about your mutation testing efforts like at the top of this readme you can make use of the <a href="https://dashboard.stryker-mutator.io">dashboard</a> of stryker by letting crytic post  the msi score to the stryker API. To do that, make sure to have the following env vars set:</p>
<pre><code class="language-crystal"><span class="t">CIRCLE_BRANCH</span>             =&gt; <span class="s">&quot;master&quot;</span>,
<span class="t">CIRCLE_PROJECT_REPONAME</span>   =&gt; <span class="s">&quot;crytic&quot;</span>,
<span class="t">CIRCLE_PROJECT_USERNAME</span>   =&gt; <span class="s">&quot;hanneskaeufler&quot;</span>,
<span class="t">STRYKER_DASHBOARD_API_KEY</span> =&gt; <span class="s">&quot;apikey&quot;</span>,</code></pre>
<p>It is currently limited to work with Circle CI and assumes your project is hosted on GitHub.</p>
<h3><a id="available-mutants" class="anchor" href="#available-mutants">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Available mutants</h3>
<p>There are many ways a code-base can be modified to introduce arbitrary failures. Crytic only provides mutators which keep the code compiling (at least in theory). Currently, available mutators are:</p>
<h4><a id="and-or-swap" class="anchor" href="#and-or-swap">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>AndOrSwap</h4>
<p>This mutant replaces the <code>&amp;&amp;</code> operator by the <code>||</code> operator and vice-versa. A typical mutation is:</p>
<pre><code class="language-diff">- if cool &amp;&amp; nice
+ if cool || nice</code></pre>
<h4><a id="bool-literal-flip" class="anchor" href="#bool-literal-flip">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>BoolLiteralFlip</h4>
<p>This mutant flips literal occurances of <code>true</code> or <code>false</code>. A typical mutation is:</p>
<pre><code class="language-diff">  def valid
-   return true
+   return false
  end</code></pre>
<h4><a id="condition-flip" class="anchor" href="#condition-flip">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>ConditionFlip</h4>
<p>This mutant flips the <code>if</code> and <code>else</code> branch in conditions. It will create an <code>else</code> branch even if there is none. A typical mutation is:</p>
<pre><code class="language-diff">  if true
+ else
    doSomething()
  end</code></pre>
<h4><a id="number-literal-change" class="anchor" href="#number-literal-change">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>NumberLiteralChange</h4>
<p>This mutant changes literal occurances of numbers by replacing them with &quot;0&quot;. &quot;0&quot; gets replaces by &quot;1&quot;. A typical mutation is:</p>
<pre><code class="language-diff">-  0
+  1</code></pre>
<h4><a id="number-literal-sign-change" class="anchor" href="#number-literal-sign-change">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>NumberLiteralSignChange</h4>
<p>This mutant changes the sign of literal numbers. It ignores literal &quot;0&quot;. A typical mutation is:</p>
<pre><code class="language-diff">- 5
+ -5</code></pre>
<h4><a id="string-literal-change" class="anchor" href="#string-literal-change">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>StringLiteralChange</h4>
<p>This mutant changes literal occurances of string by replacing empty strings with <code>__crytic__</code> and all other strings with the empty string. Typical mutations are:</p>
<pre><code class="language-diff">- &quot;Welcome&quot;
+ &quot;&quot;</code></pre>
<h4><a id="any-all-swap" class="anchor" href="#any-all-swap">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>AnyAllSwap</h4>
<p>This mutant exchanges calls to <a href="https://crystal-lang.org/api/0.27.0/Enumerable.html#all?-instance-method">Enumerable#all?</a> with calls to <a href="https://crystal-lang.org/api/0.27.0/Enumerable.html#any?-instance-method">Enumerable#any?</a> and vice-versa. A typical mutation is:</p>
<pre><code class="language-diff">- [false].all?
+ [false].any?</code></pre>
<h4><a id="regexp-literal-change" class="anchor" href="#regexp-literal-change">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>RegexpLiteralChange</h4>
<p>This mutant modifies any regular expression literal to never match anything. A typical mutation is:</p>
<pre><code class="language-diff">- /\d+/
+ /a^/</code></pre>
<h4><a id="select-reject-swap" class="anchor" href="#select-reject-swap">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>SelectRejectSwap</h4>
<p>This mutant exchanges calls to <a href="https://crystal-lang.org/api/0.27.0/Enumerable.html#select(&amp;block:T-%3E)-instance-method">Enumerable#select</a> with calls to <a href="https://crystal-lang.org/api/0.27.0/Enumerable.html#reject(&amp;block:T-%3E)-instance-method">Enumerable#reject</a> and vice-versa. A typical mutation is:</p>
<pre><code class="language-diff">- [1].select(&amp;.nil?)
+ [1].reject(&amp;.nil?)</code></pre>
<h4><a id="drop-call-in-void-def" class="anchor" href="#drop-call-in-void-def">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>DropCallInVoidDef</h4>
<p>This mutant replaces method calls with <code>nil</code>. The mutation is only performed inside methods that are of void return type.</p>
<pre><code class="language-diff">def some_method : Nil
- perform_side_effect
+ nil
end</code></pre>
<h4><a id="symbol-literal-change" class="anchor" href="#symbol-literal-change">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>SymbolLiteralChange</h4>
<p>This mutant modifies symbol literals by prefixing them with <code>__crytic__</code>.</p>
<pre><code class="language-diff">- :hello
+ :__crytic__hello</code></pre>
<h2><a id="credits-inspiration" class="anchor" href="#credits-inspiration">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Credits &amp; inspiration</h2>
<p>I have to credit the crystal <a href="https://github.com/anykeyh/crystal-coverage">code-coverage</a> shard which finally helped me create a working mutation testing tool after one or two failed attempts. I took heavy inspirations from its <a href="https://github.com/anykeyh/crystal-coverage/blob/master/src/coverage/inject/source_file.cr">SourceFile</a> class and actually lifted nearly all the code.</p>
<p>One of the more difficult parts of crytic was the resolving of <code>require</code> statements. In order to work for most projects, crytic has to resolve those statements identical to the way crystal itself does. I achieved this (for now) by copying a bunch of methods from crystal-lang itself.</p>
<p>In order to avoid dependencies for tiny amounts of savings I rather copied/adapted a bit of code from <a href="https://github.com/hugoabonizio/timeout.cr">timeout.cr</a> and <a href="https://github.com/MakeNowJust/crystal-diff">crystal-diff</a>.</p>
<p>Obviously I didn't invent mutation testing. While I cannot remember where I have read about it initially, my first recollection is the <a href="https://github.com/mbj/mutant">mutant</a> gem for ruby. <a href="https://github.com/mbj">Markus Shirp</a>, author of mutant is also the one who explained the notion of a &quot;neutral&quot; mutant to me in private chat. I took his idea and implemented it in crytic as well. Thanks!</p>
<p>The logo above is free from <a href="https://icons8.com/ouch/illustration/searching-1#">icons8.com</a>.</p>
<h3><a id="alternatives" class="anchor" href="#alternatives">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Alternatives</h3>
<p>Although not having tested it myself yet, the <a href="https://github.com/mull-project/mull">mull</a> libray is supposed to work for any llvm based language, which I believe crystal is.</p>
<h2><a id="execution-flow" class="anchor" href="#execution-flow">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Execution flow</h2>
<p>The following diagram shows a rough sequence of how crytic works. It was generated in <a href="https://mermaidjs.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbkJJTj5Vc2VyIGludm9rZXMgLi9iaW4vY3J5dGljXSAtLT4gfENoZWNrIGFyZ3VtZW50c3wgUlVOTkVSKFN0YXJ0IHJ1bm5lcilcblJVTk5FUiAtLT5JTklUSUFMKFwiSW5pdGlhbCB0ZXN0IHJ1biB3aXRoICdjcnlzdGFsIHNwZWMnXCIpXG5JTklUSUFMIC0tPklOSVRfUEFTU3tQYXNzZXM_fVxuSU5JVF9QQVNTLS0-fFllc3wgUE9TU0lCSUxJVElFUyhGaW5kIG11dGF0aW9uIHBvc3NpYmlsaXRpZXMpXG5QT1NTSUJJTElUSUVTLS0-fEZvciBlYWNoIHN1YmplY3R8IE5FVVRSQUwoUnVuIG5ldXRyYWwgbXV0YXRpb24pXG5JTklUX1BBU1MtLT58Tm98IEFCT1JUKEFib3J0IGNyeXRpYylcbk5FVVRSQUwtLT5ORVVUUkFMX1BBU1N7UGFzc2VzP31cbk5FVVRSQUxfUEFTUy0tPnxZZXN8IFJVTl9NVVRBVElPTlMoUnVuIG11dGF0aW9ucylcblJVTl9NVVRBVElPTlMtLT4gfE5leHQgc3ViamVjdHwgTkVVVFJBTFxuTkVVVFJBTF9QQVNTLS0-fE5vfCBTS0lQX1NVQkpFQ1QoU2tpcCBzdWJqZWN0KVxuU0tJUF9TVUJKRUNULS0-IHxOZXh0IHN1YmplY3R8IE5FVVRSQUxcblJVTl9NVVRBVElPTlMtLT5GSU5JU0hFRD5GaW5pc2hlZF1cbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In19">mermaidjs.github.io</a>.</p>
<p align="center">
    <img alt="Sequence flow" height="1000" src="./flow.svg" />
</p>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>
<ol>
<li>Fork it (<a href="https://github.com/hanneskaeufler/crytic/fork">https://github.com/hanneskaeufler/crytic/fork</a>)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Run tests locally with <code>crystal spec</code></li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>
<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>
<ul>
<li><a href="https://github.com/hanneskaeufler">hanneskaeufler</a> Hannes Käufler - creator, maintainer</li>
<li><a href="https://github.com/anicholson">anicholson</a> Andy Nicholson - contributor</li>
</ul>
</div>
</body>
</html>
